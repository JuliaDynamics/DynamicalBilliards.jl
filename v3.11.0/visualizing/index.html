<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualizing &amp; Animating · DynamicalBilliards.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="DynamicalBilliards.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">DynamicalBilliards.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../basic/high_level/">High Level API</a></li><li class="is-active"><a class="tocitem" href>Visualizing &amp; Animating</a><ul class="internal"><li><a class="tocitem" href="#Examples-1"><span>Examples</span></a></li><li><a class="tocitem" href="#Color-conventions-1"><span>Color conventions</span></a></li><li><a class="tocitem" href="#Animating-the-motion-of-a-particle-1"><span>Animating the motion of a particle</span></a></li><li><a class="tocitem" href="#Periodic-Billiards-1"><span>Periodic Billiards</span></a></li><li><a class="tocitem" href="#Boundary-Map-plots-1"><span>Boundary Map plots</span></a></li></ul></li><li><a class="tocitem" href="../basic/phasespaces/">Phase Spaces</a></li><li><a class="tocitem" href="../ray-splitting/">Ray-Splitting</a></li><li><a class="tocitem" href="../lyapunovs/">Lyapunov Exponents</a></li><li><a class="tocitem" href="../mushroomtools/">MushroomTools</a></li><li><a class="tocitem" href="../physics/">Physics</a></li><li><a class="tocitem" href="../basic/low_level/">Internals</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/billiard_table/">Defining a Billiard</a></li><li><a class="tocitem" href="../tutorials/own_obstacle/">Defining your own Obstacles</a></li><li><a class="tocitem" href="../tutorials/examples/">Examples</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Visualizing &amp; Animating</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Visualizing &amp; Animating</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/master/docs/src/visualizing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Visualizing-and-Animating-1"><a class="docs-heading-anchor" href="#Visualizing-and-Animating-1">Visualizing &amp; Animating</a><a class="docs-heading-anchor-permalink" href="#Visualizing-and-Animating-1" title="Permalink"></a></h1><p>All plotting functionality of <code>DynamicalBilliards</code> lies within a few well-defined functions that use the <code>PyPlot</code> package to plot aspects of the system.</p><p>All plotting functions are brought into scope when <code>using PyPlot</code>. The functions are:</p><article class="docstring"><header><a class="docstring-binding" id="PyPlot.plot-Tuple{Obstacle}" href="#PyPlot.plot-Tuple{Obstacle}"><code>PyPlot.plot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot(obst::Obstacle; kwargs...)</code></pre><p>Plot given obstacle on the current <code>PyPlot</code> axes.</p><p>The default arguments for each type of obstacle have been chosen for maximum clarity and consistency.</p><p>The <code>kwargs...</code> given by the user are keywords passed directly into PyPlot&#39;s constructors. For <code>Wall</code> obstacles, kwargs are passed into <code>PyPlot.plot()</code>. For <code>Circular</code> obstacles, kwargs are passed into <code>matplotlib.patches.Circle</code> or <code>Arc</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/ad7df20050f6e9d2e3f212d7043f32ea142c8606/src/plotting/obstacles.jl#L11-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PyPlot.plot-Tuple{Billiard}" href="#PyPlot.plot-Tuple{Billiard}"><code>PyPlot.plot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot(bd::Billiard; ax = (figure(); gca()))</code></pre><p>Plot all obstacles in <code>bd</code> using the default arguments, set <code>xlim</code> and <code>ylim</code> to be 20% larger than <code>cellsize</code> and set the axis aspect ratio to equal.</p><pre><code class="language-none">plot(bd::Billiard, xmin, ymin, xmax, ymax;
     hexagonal = false, ax = (figure(); gca()))</code></pre><p>Plot the given <strong>periodic</strong> billiard <code>bd</code>, repeatedly plotting from <code>(xmin, ymin)</code> to <code>(xmax, ymax)</code>. Works for either rectangular periodic billiards, or hexagonal ones. Use keyword <code>hexagonal</code> to denote which one you want.</p><pre><code class="language-none">plot(bd::Billiard, xt::Vector, yt::Vector; hexagonal = false,
     ax = (figure(); gca()), plot_orbit = true, orbit_color = &quot;C0&quot;)</code></pre><p>Plot the given billiard <code>bd</code> and an acompanying orbit resulting from <a href="../basic/high_level/#DynamicalBilliards.timeseries!"><code>timeseries!</code></a> using the limits defined by <code>xt</code> and <code>yt</code>. Works for both periodic and normal billiards.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/ad7df20050f6e9d2e3f212d7043f32ea142c8606/src/plotting/billiards.jl#L17-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PyPlot.plot-Tuple{AbstractParticle,Bool}" href="#PyPlot.plot-Tuple{AbstractParticle,Bool}"><code>PyPlot.plot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">plot(p::AbstractParticle [, cyclotron=false]; use_cell=true, ax=gca(), kwargs...)</code></pre><p>Plot given particle on <code>ax</code>. Optionally use <code>p.current_cell</code> for the particle&#39;s position. Given <code>kwargs...</code> are passed onto <code>PyPlot.scatter</code>.</p><p>The particle is represented as a small ball (<code>PyPlot.scatter</code>) and a small arrow (<code>PyPlot.quiver</code>). All <code>kwargs...</code> are given to <code>scatter</code> but if a keyword argument <code>color</code> is given, it is also passed to <code>quiver</code>.</p><p>Optionally you can plot the cyclotron traced by a <code>MagneticParticle</code> by giving <code>true</code> as second argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/ad7df20050f6e9d2e3f212d7043f32ea142c8606/src/plotting/particles.jl#L28-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DynamicalBilliards.animate_evolution" href="#DynamicalBilliards.animate_evolution"><code>DynamicalBilliards.animate_evolution</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">animate_evolution(ps, bd, colnumber [, raysplitters]; kwargs...)</code></pre><p>Animate the evolution of a vector of particles <code>ps</code> in billiard <code>bd</code> for a total time <code>t</code> (always considered float). Optionally enable ray-splitting.</p><p><strong>Evolution kwargs</strong></p><ul><li><code>dt = 0.01</code> : Time resolution used for production of time series (see <a href="../basic/high_level/#DynamicalBilliards.timeseries!"><code>timeseries!</code></a>. It is not recommended to significantly increase this value, to preserve the smoothness of the orbits.</li><li><code>frameskip = 5</code> : The amount of <code>dt</code>-steps performed each frame. Increasing either <code>frameskip</code> and <code>dt</code> makes the animation progress faster.</li><li><code>tailtime = 1.0</code> : The length of the &quot;tail&quot; trailing the particle in time units.</li><li><code>resetting = reset_billiard!</code> : function called after evolving each individual particle in the billiard (so that ray-splitting doesn&#39;t break).</li></ul><p><strong>Colors &amp; plotting kwargs</strong></p><ul><li><code>colors</code> : An array of valid Matplotlib colors for the &quot;tails&quot;. If <code>colors</code> is shorter than <code>ps</code>, colors are reused. Defaults to the standard Matplotlib color sequence.</li><li><code>particle_kwargs::NamedTuple</code> : Additional keyword arguments passed to the <code>plot</code> function for particles.</li><li><code>tail_kwargs::NamedTuple</code>: Additional keyword arguments passed to the <code>plot</code> function for &quot;tails&quot; (line plot).</li></ul><p><strong>Exporting and axis kwargs</strong></p><ul><li><code>figsize = (7.2, 7.2))</code> : Size for new figure (if one is created). Must be divisible by 2 if you want to save the animation.</li><li><code>dpi = 100</code> : DPI for saving the figures (and thus for also the resulting video).</li><li><code>ax = (figure(figsize = figsize); plot(bd); gca())</code> : axis to plot on.</li><li><code>savename = nothing</code> : If given the animation is exported to an <code>savetype</code> file (requires ffmpeg). The name can include path.</li><li><code>savetype = &quot;mp4&quot;</code> or <code>&quot;gif&quot;</code>.</li><li><code>disable_axis = false</code> : Remove the axis splines.</li><li><code>deletefigs = true</code> : To create the animation a lot of figures are saved in the save directory and are deleted after the animation is done. You can choose to keep them.</li><li><code>framerate = 20</code> : Animation framerate.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/ad7df20050f6e9d2e3f212d7043f32ea142c8606/src/plotting/animations.jl#L49-L85">source</a></section></article><h2 id="Examples-1"><a class="docs-heading-anchor" href="#Examples-1">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-1" title="Permalink"></a></h2><h3 id="Plotting-Obstacles-with-keywords-1"><a class="docs-heading-anchor" href="#Plotting-Obstacles-with-keywords-1">Plotting Obstacles with keywords</a><a class="docs-heading-anchor-permalink" href="#Plotting-Obstacles-with-keywords-1" title="Permalink"></a></h3><pre><code class="language-julia">using DynamicalBilliards, PyPlot

bd = billiard_sinai()

figure()
plot(bd[2]);
plot(bd[4], color = &quot;blue&quot;, linestyle = &quot;dotted&quot;, lw = 5.0);
plot(bd[1], facecolor = &quot;yellow&quot;, edgecolor = &quot;black&quot;);</code></pre><p><img src="../rand_obstacles.svg" alt/></p><h3 id="Plotting-a-Billiard-1"><a class="docs-heading-anchor" href="#Plotting-a-Billiard-1">Plotting a Billiard</a><a class="docs-heading-anchor-permalink" href="#Plotting-a-Billiard-1" title="Permalink"></a></h3><pre><code class="language-julia">using DynamicalBilliards
b = billiard_polygon(6, 1)
a = Antidot([0.0,0.0], 0.5)
bd = Billiard(b.obstacles..., a)</code></pre><pre><code class="language-none">Billiard{Float64} with 7 obstacles:
  wall 1
  wall 2
  wall 3
  wall 4
  wall 5
  wall 6
  Antidot</code></pre><p>If you want to quickly plot the entire billiard with default parameters, simply use the function <code>plot(bd)</code>:</p><pre><code class="language-julia">using PyPlot
plot(bd)</code></pre><p><img src="../billiard_example.svg" alt/></p><p><code>plot()</code> also sets up the axis to have equal aspect ratio and sets up the axis limits to be just large enough to contain the entire billiard.</p><h3 id="Plotting-particles-1"><a class="docs-heading-anchor" href="#Plotting-particles-1">Plotting particles</a><a class="docs-heading-anchor-permalink" href="#Plotting-particles-1" title="Permalink"></a></h3><p>Following the above example, we create and plot a particle using the function <code>plot</code>:</p><pre><code class="language-julia">p = randominside(bd)
plot(p)
# Plot one more particle with purple color,
# pentagon shape and bigger size (default is s=30):
p2 = randominside(bd)
plot(p2; color=(0.5, 0, 0.8), marker=&quot;p&quot;, s=60.0)
p3 = randominside(bd, 2.0)
plot(p3, true; color=(0, 0, 0.8), marker=&quot;o&quot;, s=60.0)</code></pre><p><img src="../particles_example.svg" alt/></p><p>(notice that the particle position and direction are random)</p><h2 id="Color-conventions-1"><a class="docs-heading-anchor" href="#Color-conventions-1">Color conventions</a><a class="docs-heading-anchor-permalink" href="#Color-conventions-1" title="Permalink"></a></h2><p>The default plotting settings have been chosen for maximum clarity and consistency. The color conventions followed are:</p><ul><li>Particles are black.</li><li>Particle orbits use matplotlib&#39;s color cycle (first one is blue).</li><li>Reflecting obstacles (e.g. <code>Disk</code>, <code>FiniteWall</code> etc.) are green.</li><li>Randomly reflecting obstacles (e.g. <code>RandomDisk</code> or <code>RandomWall</code>) are purple.</li><li>Ray-splitting obstacles are red with dashed linestyle.</li><li>Periodicity enforcing obstacles are yellow with dotted linestyle (if and when plotted).</li><li>Doors (<code>FiniteWall</code> with <code>isdoor=true</code>) are plotted with alternating black and cyan dashed lines.</li></ul><h2 id="Animating-the-motion-of-a-particle-1"><a class="docs-heading-anchor" href="#Animating-the-motion-of-a-particle-1">Animating the motion of a particle</a><a class="docs-heading-anchor-permalink" href="#Animating-the-motion-of-a-particle-1" title="Permalink"></a></h2><p>The function <a href="#DynamicalBilliards.animate_evolution"><code>animate_evolution</code></a> is provided to animate the evolution of a particle from collision to collision. Let&#39;s animate a particle inside a simple pentagon with magnetic field:</p><pre><code class="language-julia">bd = billiard_polygon(5, 1)
a = Disk([0.0,0.0], 0.4)
bd = Billiard(bd.obstacles..., a)
p = MagneticParticle(0, -0.5, 0, 1.0)

animate_evolution(p, bd, 10.0; savename = &quot;penta&quot;)</code></pre><video width="100%" height="auto" controls>
<source src="https://raw.githubusercontent.com/JuliaDynamics/JuliaDynamics/master/videos/billiards/penta.mp4?raw=true" type="video/mp4">
</video><p>The cool thing about <a href="#DynamicalBilliards.animate_evolution"><code>animate_evolution</code></a> is that it can animate multiple particles simultaneously! For example, here is a beautiful demonstration of chaos in non-dispersive billiards:</p><pre><code class="language-julia">bd = billiard_stadium()
N = 20
cs = [(i/N, 0, 1 - i/N, 0.5) for i in 1:N]
ps = [Particle(1, 0.6 + 0.0005*i, 0) for i in 1:N]

animate_evolution(ps, bd, 10.0; colors = cs, tailtime = 1.5, savename = &quot;disperse&quot;)</code></pre><video width="100%" height="auto" controls>
<source src="https://raw.githubusercontent.com/JuliaDynamics/JuliaDynamics/master/videos/billiards/disperse.mp4?raw=true" type="video/mp4">
</video><h2 id="Periodic-Billiards-1"><a class="docs-heading-anchor" href="#Periodic-Billiards-1">Periodic Billiards</a><a class="docs-heading-anchor-permalink" href="#Periodic-Billiards-1" title="Permalink"></a></h2><p>In order to plot periodic billiards, you have need to call a different method of <a href="#PyPlot.plot-Tuple{Obstacle}"><code>plot</code></a>, since now you also have to specify the limits of plotting. The methods provided are:</p><pre><code class="language-julia">plot(bd, xmin, ymin, xmax, ymax)
plot(bd, xt::Vector{T}, yt::Vector{T})</code></pre><p>The last one conveniently plots the combo of particle-trajectory and periodic-billiard taking care of all the details internally. Give the keyword <code>plot_orbit = false</code> if you do not want to plot the orbit defined by <code>(xt, yt)</code>.</p><p>For example, the following code</p><pre><code class="language-julia">using DynamicalBilliards, PyPlot
r = 0.25
bd = billiard_rectangle(2, 1; setting = &quot;periodic&quot;)
d = Disk([0.5, 0.5], r)
d2 = Ellipse([1.5, 0.5], r, 2r/3)
bd = Billiard(bd.obstacles..., d, d2)
p = Particle(1.0, 0.5, 0.2)
xt, yt, vxt, vyt, t = timeseries!(p, bd, 10)
plot(bd, xt, yt)
plot(p)</code></pre><p><img src="../rectperiodic.svg" alt/></p><p>And, you can also periodically plot billiards with hexagonal periodicity. Only give the keyword argument <code>hexagonal = true</code> to <a href="#PyPlot.plot-Tuple{Obstacle}"><code>plot</code></a>. As an example:</p><pre><code class="language-julia">bd = billiard_hexagonal_sinai(0.3, 1.50; setting = &quot;periodic&quot;)
d = Disk([0.7, 0], 0.2)
d2 = Antidot([0.7/2, 0.65], 0.35)
bd = Billiard(bd..., d, d2)

p = MagneticParticle(-0.5, 0.5, π/5, 1.0)

xt, yt = timeseries(p, bd, 10)

plot(bd, xt, yt; hexagonal = true)</code></pre><p><img src="../hexperiodic.svg" alt/></p><h2 id="Boundary-Map-plots-1"><a class="docs-heading-anchor" href="#Boundary-Map-plots-1">Boundary Map plots</a><a class="docs-heading-anchor-permalink" href="#Boundary-Map-plots-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DynamicalBilliards.plot_boundarymap" href="#DynamicalBilliards.plot_boundarymap"><code>DynamicalBilliards.plot_boundarymap</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">plot_boundarymap(bmap, intervals; kwargs...)</code></pre><p>Plots the boundary map. The input arguments are the return values of <a href="../basic/phasespaces/#DynamicalBilliards.boundarymap"><code>boundarymap</code></a> (also applies for the parallelized version, where <code>bmap</code> is a vector of vectors of 2-vectors).</p><p><strong>Keyword Arguments</strong></p><ul><li><code>ax = (figure(); gca())</code> : The axis to plot on.</li><li><code>color = &quot;C0&quot;</code> : The color to use for the plotted points. Can be either a color for <code>PyPlot.plot</code> or a vector of colors of length <code>length(bmap)</code>, in order to give each initial condition a different color (for parallelized version).</li><li><code>ms = 1.0</code> : Marker size of the points.</li><li><code>bordercolor = &quot;C3&quot;</code> : The color of the vertical lines that denote the obstacle borders.</li><li><code>obstacleindices = true</code>: show obstacle indices above plot</li><li>Any other keyword argument is passed to <code>PyPlot.plot</code> which plots the points of the section.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/DynamicalBilliards.jl/blob/ad7df20050f6e9d2e3f212d7043f32ea142c8606/src/plotting/boundarymap_plots.jl#L3-L21">source</a></section></article><p>Examples are shown in the <a href="../basic/phasespaces/">phase spaces</a> section.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../basic/high_level/">« High Level API</a><a class="docs-footer-nextpage" href="../basic/phasespaces/">Phase Spaces »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 19 April 2020 12:14">Sunday 19 April 2020</span>. Using Julia version 1.4.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
